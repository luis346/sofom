{% extends 'base.html' %}
{% block title %}Captura de Solicitud{% endblock %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/modulos.css' %}">
<div class="container">
    <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="card" style="border-radius: 2rem;">
            <div class="card-body p-4 p-lg-5 text-black">
                <h2 class="mb-3">Captura de Solicitud</h2>

                <!-- Un solo formulario que abarca todos los datos -->
                <form class="row g-3" method="POST" id="formSolicitud" novalidate>
                    {% csrf_token %}

                    <!-- Pestañas de navegación -->
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="tab-personales-tab" data-bs-toggle="tab"
                                data-bs-target="#tab-personales" type="button" role="tab" aria-controls="tab-personales"
                                aria-selected="true">Datos personales</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="tab-conyuge-tab" data-bs-toggle="tab" data-bs-target="#tab-conyuge"
                                type="button" role="tab" aria-controls="tab-conyuge" aria-selected="false">Datos del
                                cónyuge</a>
                        </li>
                        <li class="nav-item" role="presentation"></li>
                        <a class="nav-link" id="tab-info-tab" data-bs-toggle="tab" data-bs-target="#tab-info"
                            type="button" role="tab" aria-controls="tab-info" aria-selected="false">Informacion del
                            solicitante</a>
                        </li>
                        <li class="nav-item" role="presentation"></li>
                        <a class="nav-link" id="tab-ref-tab" data-bs-toggle="tab" data-bs-target="#tab-ref"
                            type="button" role="tab" aria-controls="tab-ref" aria-selected="false">Referencias</a>
                        </li>
                        <li class="nav-item" role="presentation"></li>
                        <a class="nav-link" id="tab-credi-tab" data-bs-toggle="tab" data-bs-target="#tab-credi"
                            type="button" role="tab" aria-controls="tab-credi" aria-selected="false">Datos del
                            Credito</a>
                        </li>
                        <li class="nav-item" role="presentation"></li>
                        <a class="nav-link" id="tab-contacto-tab" data-bs-toggle="tab" data-bs-target="#tab-contacto"
                            type="button" role="tab" aria-controls="tab-contacto" aria-selected="false">Contactos</a>
                        </li>
                    </ul>

                    <!-- Contenido de cada pestaña -->
                    <div class="tab-content" id="myTabContent">
                        <!-- Pestaña de Datos Personales -->
                        <div class="tab-pane fade show active" id="tab-personales" role="tabpanel"
                            aria-labelledby="tab-personales-tab">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="{{ form.apellido_paterno.id_for_label }}" class="form-label">Apellido
                                        Paterno</label>
                                    {{ form.apellido_paterno }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ form.apellido_materno.id_for_label }}" class="form-label">Apellido
                                        Materno</label>
                                    {{ form.apellido_materno }}
                                </div>

                                <div class="col-3">
                                    <label for="{{ form.nombres.id_for_label }}" class="form-label">Nombre</label>
                                    {{ form.nombres }}
                                </div>

                                <!-- Otros campos como fecha de nacimiento, edad, RFC, etc. -->
                                <div class="col-3">
                                    <label for="{{ form.fecha_nacimiento.id_for_label }}" class="form-label">Fecha de
                                        Nacimiento</label>
                                    {{ form.fecha_nacimiento }}
                                </div>

                                <div class="col-1">
                                    <label for="{{ form.edad.id_for_label }}" class="form-label">Edad</label>
                                    {{ form.edad }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.rfc.id_for_label }}" class="form-label">RFC</label>
                                    {{ form.rfc }}
                                </div>

                                <!-- Campos de selección como Género y Estado Civil -->
                                <div class="col-md-2">
                                    <label for="{{ form.genero.id_for_label }}" class="form-label">Género</label>
                                    {{ form.genero }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.estado_civil.id_for_label }}" class="form-label">Estado
                                        Civil</label>
                                    {{ form.estado_civil }}
                                </div>

                                <!-- Campo CURP -->
                                <div class="col-md-4">
                                    <label for="{{ form.curp.id_for_label }}" class="form-label">CURP</label>
                                    {{ form.curp }}
                                </div>

                                <!-- Campo Email -->
                                <div class="col-1">
                                    <label for="{{ form.dependientes.id_for_label }}"
                                        class="form-label">Dependientes</label>
                                    {{ form.dependientes }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.tipo_id_oficial.id_for_label }}" class="form-label">Tipo de ID.
                                        Oficial</label>
                                    {{ form.tipo_id_oficial }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.clave_id_oficial.id_for_label }}" class="form-label">Clave ID.
                                        Oficial</label>
                                    {{ form.clave_id_oficial }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.nacionalidad.id_for_label }}"
                                        class="form-label">Nacionalidad</label>
                                    {{ form.nacionalidad }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.pais_nacimiento.id_for_label }}" class="form-label">Pais de
                                        Nacimiento</label>
                                    {{ form.pais_nacimiento }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.entidad_federativa_naciemiento.id_for_label }}"
                                        class="form-label">Entidad Federativa</label>
                                    {{ form.entidad_federativa_nacimiento }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.proveedor_recursos.id_for_label }}" class="form-label">Proveedor
                                        Recursos</label>
                                    {{ form.proveedor_recursos}}
                                </div>

                                <div class="col-md-4">
                                    <label for="{{ form.imss.id_for_label }}" class="form-label">IMSS</label>
                                    {{ form.imss }}
                                </div>

                                <div class="col-md-4">
                                    <label for="{{ form.mercado.id_for_label }}" class="form-label">Mercado</label>
                                    {{ form.mercado }}
                                </div>

                                <h4 class="mb-3">Domicilio Particular</h4>

                                <div class="col-md-3">
                                    <label for="{{ form.calle.id_for_label }}" class="form-label">Calle</label>
                                    {{ form.calle }}
                                </div>

                                <div class="col-1">
                                    <label for="{{ form.no_exterior.id_for_label }}" class="form-label">No.
                                        Exterior</label>
                                    {{ form.no_exterior }}
                                </div>

                                <div class="col-1">
                                    <label for="{{ form.no_interior.id_for_label }}" class="form-label">No.
                                        Interior</label>
                                    {{ form.no_interior}}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.pais_nacimiento.id_for_label }}" class="form-label">Pais
                                    </label>
                                    {{ form.pais_nacimiento }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.codigo_postal.id_for_label }}" class="form-label">Código
                                        Postal</label>
                                    {{ form.codigo_postal }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.estado.id_for_label }}" class="form-label">Estado</label>
                                    {{ form.estado}}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ form.municipio.id_for_label }}" class="form-label">Delegacion o
                                        Municipio</label>
                                    {{ form.municipio }}
                                </div>

                                <div class="col-md-3">
                                    <label for="id_solicitud-colonia" class="form-label">Colonia</label>
                                    <select id="id_solicitud-colonia" name="solicitud-colonia" class="form-control">
                                        <option value="">Selecciona una colonia</option>
                                    </select>
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.entre_calles.id_for_label }}" class="form-label">Entre
                                        calles</label>
                                    {{ form.entre_calles }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.tipo_vivienda.id_for_label }}" class="form-label">Tipo de
                                        vivienda</label>
                                    {{ form.tipo_vivienda }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.anios_residencia.id_for_label }}" class="form-label">Años de
                                        residencia</label>
                                    {{ form.anios_residencia }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.telefono_fijo.id_for_label }}" class="form-label">Telefono
                                        fijo</label>
                                    {{ form.telefono_fijo }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.celular.id_for_label }}" class="form-label">Celular</label>
                                    {{ form.celular }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.telefono_avisos.id_for_label }}" class="form-label">Telefono de
                                        avisos</label>
                                    {{ form.telefono_avisos }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ form.email.id_for_label }}" class="form-label">E-mail</label>
                                    {{ form.email }}
                                </div> <!-- Otros campos del formulario de cliente -->
                            </div>
                        </div>

                        <!-- Pestaña de Datos del Cónyuge -->
                        <div class="tab-pane fade" id="tab-conyuge" role="tabpanel" aria-labelledby="tab-conyuge-tab">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.apellido_paterno.id_for_label }}" class="form-label"
                                        style="display: block;">Apellido Paterno</label>
                                    {{ conyuge_form.apellido_paterno }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.apellido_materno.id_for_label }}"
                                        class="form-label">Apellido Materno</label>
                                    {{ conyuge_form.apellido_materno }}
                                </div>

                                <div class="col-3">
                                    <label for="{{ conyuge_form.nombres.id_for_label }}"
                                        class="form-label">Nombre</label>
                                    {{ conyuge_form.nombres }}
                                </div>

                                <!-- Otros campos como fecha de nacimiento, edad, RFC, etc. -->
                                <div class="col-3">
                                    <label for="{{ conyuge_form.fecha_nacimiento.id_for_label }}"
                                        class="form-label">Fecha de Nacimiento</label>
                                    {{ conyuge_form.fecha_nacimiento }}
                                </div>

                                <div class="col-1">
                                    <label for="{{ conyuge_form.edad.id_for_label }}" class="form-label">Edad</label>
                                    {{ conyuge_form.edad }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.rfc.id_for_label }}" class="form-label">RFC</label>
                                    {{ conyuge_form.rfc }}
                                </div>

                                <!-- Campos de selección como Género y Estado Civil -->
                                <div class="col-md-2">
                                    <label for="{{ conyuge_form.genero.id_for_label }}"
                                        class="form-label">Género</label>
                                    {{ conyuge_form.genero }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.lugar_nacimiento.id_for_label }}"
                                        class="form-label">Lugar Nacimiento</label>
                                    {{ conyuge_form.lugar_nacimiento }}
                                </div>

                                <!-- Campos de selección como Género y Estado Civil -->
                                <div class="col-md-2">
                                    <label for="{{ conyuge_form.profesion.id_for_label }}"
                                        class="form-label">Profesion</label>
                                    {{ conyuge_form.profesion }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.nombre_empresa.id_for_label }}"
                                        class="form-label">Nombre de la Empresa</label>
                                    {{ conyuge_form.nombre_empresa }}
                                </div>

                                <!-- Campos de selección como Género y Estado Civil -->
                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.puesto.id_for_label }}"
                                        class="form-label">Puesto</label>
                                    {{ conyuge_form.puesto }}
                                </div>

                                <!-- Campos de selección como Género y Estado Civil -->
                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.fecha_ingreso.id_for_label }}" class="form-label">Fecha
                                        de Ingreso</label>
                                    {{ conyuge_form.fecha_ingreso }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ conyuge_form.antiguedad.id_for_label }}"
                                        class="form-label">Antiguedad</label>
                                    {{ conyuge_form.antiguedad }}
                                </div>

                            </div>
                        </div>

                        <!-- Pestaña de Informacion Solicitante -->
                        <div class="tab-pane fade" id="tab-info" role="tabpanel" aria-labelledby="tab-info-tab">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="{{ info_form.nombre_empresa.id_for_label }}" class="form-label">Nombre
                                        de la Empresa</label>
                                    {{ info_form.nombre_empresa }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ info_form.puesto.id_for_label }}" class="form-label">Puesto</label>
                                    {{ info_form.puesto }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ info_form.antiguedad.id_for_label }}"
                                        class="form-label">Antiguedad</label>
                                    {{ info_form.antiguedad }}
                                </div>

                                <div class="col-3">
                                    <label for="{{ info_form.calle.id_for_label }}" class="form-label">Calle</label>
                                    {{ info_form.calle }}
                                </div>

                                <!-- Otros campos como fecha de nacimiento, edad, RFC, etc. -->
                                <div class="col-3">
                                    <label for="{{ info_form.soli_codigo_postal.id_for_label }}"
                                        class="form-label">Codigo Postal</label>
                                    {{ info_form.soli_codigo_postal }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ info_form.soli_estado.id_for_label }}"
                                        class="form-label">Estado</label>
                                    {{ info_form.soli_estado }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ info_form.soli_municipio.id_for_label }}"
                                        class="form-label">Municipio</label>
                                    {{ info_form.soli_municipio }}
                                </div>

                                <div class="col-md-3">
                                    <label for="id_info-soli_colonia" class="form-label">Colonia</label>
                                    <select id="id_info-soli_colonia" name="info-soli_colonia" class="form-control">
                                        <option value="">Selecciona una colonia</option>
                                    </select>
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ info_form.telefono.id_for_label }}"
                                        class="form-label">Telefono</label>
                                    {{ info_form.telefono }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ info_form.ext.id_for_label }}" class="form-label">Ext</label>
                                    {{ info_form.ext }}
                                </div>
                                <div class="col-md-2">
                                    <label for="{{ info_form.no_empleado.id_for_label }}" class="form-label">No. de
                                        Empleado</label>
                                    {{ info_form.no_empleado }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ info_form.nombre_jefe.id_for_label }}" class="form-label">Nombre del
                                        jefe</label>
                                    {{ info_form.nombre_jefe }}
                                </div>
                                <h4> Ingresos Comprobables </h4>
                                <div class="col-md-2">
                                    <label for="{{ info_form.ingreso_mensual.id_for_label }}" class="form-label">Ingreso
                                        Mensual</label>
                                    {{ info_form.ingreso_mensual }}
                                </div>
                                <div class="col-md-2">
                                    <label for="{{ info_form.descuento.id_for_label }}"
                                        class="form-label">Descuento</label>
                                    {{ info_form.descuento }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ info_form.ingreso_neto.id_for_label }}" class="form-label">Ingreso
                                        Neto</label>
                                    {{ info_form.ingreso_neto }}
                                </div>
                                <div class="col-md-4">
                                    <label for="{{ info_form.ingresos_no_comprobables.id_for_label }}"
                                        class="form-label">Ingresos no comprobables</label>
                                    {{ info_form.ingresos_no_comprobables }}
                                </div>

                                <div class="col-md-2">
                                    <label for="{{ ref_bancos_form.banco.id_for_label }}"
                                        class="form-label">Banco</label>
                                    {{ ref_bancos_form.banco }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ ref_bancos_form.cuenta_banco.id_for_label }}" class="form-label">No.
                                        cuenta
                                        de banco</label>
                                    {{ ref_bancos_form.cuenta_banco }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ ref_bancos_form.clabe_interbancaria.id_for_label }}"
                                        class="form-label">No.
                                        clabe interbancaria</label>
                                    {{ ref_bancos_form.clabe_interbancaria }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ ref_bancos_form.rfc.id_for_label }}" class="form-label">RFC</label>
                                    {{ ref_bancos_form.rfc }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ ref_bancos_form.no_tarjeta.id_for_label }}" class="form-label">No. de
                                        tarjeta</label>
                                    {{ ref_bancos_form.no_tarjeta }}
                                </div>
                                <div class="g-3">
                                    <button id="add-ref-1" type="button" class="btn btn-primary">Agregar</button>
                                </div>

                                <table class="table secondary mt-3" id="ref-table-1">
                                    <thead>
                                        <tr>
                                            <th>Banco</th>
                                            <th>No. de Cuenta</th>
                                            <th>Clabe Interbancaria</th>
                                            <th>RFC</th>
                                            <th>No. Tarjeta</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Aquí se agregarán las filas dinámicamente -->
                                    </tbody>
                                    <input type="hidden" id="bancos-data" name="bancos-data">
                                </table>

                            </div>
                        </div>
                        <!-- Pestaña de Referencias -->
                        <div class="tab-pane fade" id="tab-ref" role="tabpanel" aria-labelledby="tab-ref-tab">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="{{ ref_personal_form.nombre.id_for_label }}"
                                        class="form-label">Nombre</label>
                                    {{ ref_personal_form.nombre }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ ref_personal_form.direccion.id_for_label }}"
                                        class="form-label">Dirección</label>
                                    {{ ref_personal_form.direccion }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ ref_personal_form.relacion.id_for_label }}"
                                        class="form-label">Relación</label>
                                    {{ ref_personal_form.relacion }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ ref_personal_form.telefono.id_for_label }}"
                                        class="form-label">Teléfono</label>
                                    {{ ref_personal_form.telefono }}
                                </div>
                            </div>

                            <div class="mt-3"></div>
                            <button id="add-ref-2" type="button" class="btn btn-primary">Agregar</button>


                            <table class="table mt-3" id="ref-table-2">
                                <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Dirección</th>
                                        <th>Relación</th>
                                        <th>Teléfono</th>
                                        <th>Acciones</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Aquí se agregarán las filas dinámicamente -->
                                </tbody>
                                <input type="hidden" id="referencias-data" name="referencias-data">
                            </table>
                            <h4>Comerciales y/o Bancarias</h4>
                            <div class="row g-3">
                                <div class="col-md-4">
                                    <label for="{{ ref_bancaria_form.institucion.id_for_label }}"
                                        class="form-label">Institucion</label>
                                    {{ ref_bancaria_form.institucion }}
                                </div>
                                <div class="col-md-4">
                                    <label for="{{ ref_bancaria_form.direccion_institucion.id_for_label }}"
                                        class="form-label">Dirección</label>
                                    {{ ref_bancaria_form.direccion_institucion }}
                                </div>
                                <div class="col-md-4">
                                    <label for="{{ ref_bancaria_form.no_cuenta.id_for_label }}" class="form-label">No.
                                        de cuenta</label>
                                    {{ ref_bancaria_form.no_cuenta }}
                                </div>
                                <div class="col-md-2">
                                    <label for="{{ ref_bancaria_form.tipo_cuenta.id_for_label }}"
                                        class="form-label">Tipo de Cuenta</label>
                                    {{ ref_bancaria_form.tipo_cuenta }}
                                </div>
                                <div class="col-md-2">
                                    <label for="{{ ref_bancaria_form.telefono_institucion.id_for_label }}"
                                        class="form-label">Teléfono</label>
                                    {{ ref_bancaria_form.telefono_institucion }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ ref_bancaria_form.tipo_ref.id_for_label }}" class="form-label">Tipo
                                        Ref.</label>
                                    {{ ref_bancaria_form.tipo_ref }}
                                </div>
                                <div class="g-3">
                                    <button id="add-ref-3" type="button" class="btn btn-primary">Agregar</button>
                                </div>

                                <table class="table mt-3" id="ref-table-3">
                                    <thead>
                                        <tr>
                                            <th>Institucion</th>
                                            <th>Direccion</th>
                                            <th>No. de Cuenta</th>
                                            <th>Tipo cuenta</th>
                                            <th>Teléfono</th>
                                            <th>Tipo de Ref.</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Aquí se agregarán las filas dinámicamente -->
                                    </tbody>
                                    <input type="hidden" id="bancarias-data" name="bancarias-data">
                                </table>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="tab-credi" role="tabpanel" aria-labelledby="tab-credi-tab">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="{{ credi_form.tipo_credito.id_for_label }}" class="form-label">Tipo de
                                        Crédito</label>
                                    {{ credi_form.tipo_credito }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ credi_form.monto_prestamo.id_for_label }}" class="form-label">Monto
                                        del Préstamo</label>
                                    {{ credi_form.monto_prestamo }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ form.periodo_pago.id_for_label }}" class="form-label">Periodo de
                                        Pago</label>
                                    {{ credi_form.periodo_pago }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ credi_form.numero_periodos.id_for_label }}" class="form-label">Número
                                        de Periodos</label>
                                    {{ credi_form.numero_periodos }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ credi_form.moneda.id_for_label }}" class="form-label">Moneda</label>
                                    {{ credi_form.moneda }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ credi_form.destino_credito.id_for_label }}"
                                        class="form-label">Destino del Crédito</label>
                                    {{ credi_form.destino_credito }}
                                </div>


                                <!-- Button trigger modal -->
                                <div class="btn-text-right">
                                    <button type="button" class="btn btn-info" data-bs-toggle="modal"
                                        data-bs-target="#exampleModal">
                                        Simulador de Crédito
                                    </button>
                                </div>

                                <!-- Modal -->
                                <div class="modal fade" id="exampleModal" tabindex="-1"
                                    aria-labelledby="exampleModalLabel" aria-hidden="true">
                                    <div class="modal-dialog modal-xl">
                                        <!-- Modal grande para acomodar el contenido en dos columnas -->
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="exampleModalLabel">Simulador de Crédito</h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <!-- Estructura de dos columnas -->
                                                <div class="row">
                                                    <!-- Columna izquierda para la tabla de amortización -->
                                                    <div class="col-md-6">
                                                        <div class="table-responsive mt-4">
                                                            <table class="table table-striped" id="amortizationTable">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Número de Pago</th>
                                                                        <th>Fecha pago</th>
                                                                        <th>IVA intereses</th>
                                                                        <th>Interés</th>
                                                                        <th>Comision</th>
                                                                        <th>Seguro</th>
                                                                        <th>Pago</th>
                                                                        <th>Capital</th>
                                                                        <th>Saldo Restante</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>
                                                                    <!-- Los datos se llenarán dinámicamente -->
                                                                </tbody>
                                                            </table>
                                                            <button onclick="generatePDF()" type="button"
                                                                class="btn btn-success">Generar PDF</button>
                                                        </div>
                                                    </div>

                                                    <!-- Columna derecha para el formulario -->
                                                    <div class="col-md-6">
                                                        <form id="creditSimulator">
                                                            <div class="row g-3">
                                                                <!-- Campos de entrada (sin cambios) -->
                                                                <div class="col-md-4">
                                                                    <label for="classification"
                                                                        class="form-label">Clasificación</label>
                                                                    <select class="form-select" id="classification"
                                                                        required>
                                                                        <option value="CRED PUBLICO EN GENERAL">CRED
                                                                            PUBLICO
                                                                            EN GENERAL</option>
                                                                        <option value="OTRA CLASIFICACION">Otra
                                                                            Clasificación</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <label for="loanType" class="form-label">Tipo de
                                                                        Préstamo</label>
                                                                    <select class="form-select" id="loanType" required>
                                                                        <option value="Tipo 1">PF-CICLO 1 (periodo)
                                                                        </option>
                                                                        <option value="Tipo 2">SISU TE ACOMPAÑA
                                                                            (periodo)</option>
                                                                        <option value="Tipo 3">SISU TE ACOMPAÑA (Dia)
                                                                        </option>
                                                                    </select>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <label for="currency"
                                                                        class="form-label">Divisa</label>
                                                                    <select class="form-select" id="currency" required>
                                                                        <option value="MXN">MXN</option>
                                                                        <option value="USD">USD</option>
                                                                    </select>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <label for="id_paymentPeriod"
                                                                        class="form-label">Periodo
                                                                        de Pago</label>
                                                                    <select class="form-select" id="id_paymentPeriod"
                                                                        required>
                                                                        <option value="">Selecciona un período</option>
                                                                        <!-- Opción predeterminada -->
                                                                        <option value="QUINCENAL">QUINCENAL</option>
                                                                        <option value="MENSUAL">MENSUAL</option>
                                                                        <option value="SEMANAL">SEMANAL</option>
                                                                    </select>


                                                                    </select>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <label for="id_loanTerm"
                                                                        class="form-label">Plazo</label>
                                                                    <select name="loanTerm" class="form-select"
                                                                        id="id_loanTerm">
                                                                        <!-- Las opciones se agregarán dinámicamente -->
                                                                    </select>
                                                                </div>
                                                                <div
                                                                    style="display: flex; align-items: center; gap: 15px;">
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="flexRadioDefault" id="id_efectiva">
                                                                        <label class="form-check-label"
                                                                            for="flexRadioDefault1">
                                                                            Efectiva
                                                                        </label>
                                                                    </div>
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="flexRadioDefault" id="id_flat">
                                                                        <label class="form-check-label"
                                                                            for="flexRadioDefault2">
                                                                            FLAT
                                                                        </label>
                                                                    </div>
                                                                </div>
                                                                <div class="col-md-4">
                                                                    <label for="fecha_inicial" class="form-label">Fecha
                                                                        del Primer Pago</label>
                                                                    <input type="date" class="form-control"
                                                                        id="fecha_inicial" readonly>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <label for="fecha_final" class="form-label">Fecha
                                                                        del Último Pago</label>
                                                                    <input type="date" class="form-control"
                                                                        id="fecha_final" readonly>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <label for="numberOfPayments"
                                                                        class="form-label">Número de Pagos</label>
                                                                    <input type="text" class="form-control"
                                                                        id="numberOfPayments" readonly>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <label for="loanAmount" class="form-label">Monto del
                                                                        Crédito</label>
                                                                    <input type="number" class="form-control"
                                                                        id="loanAmount" required>
                                                                </div>
                                                                <div
                                                                    style="display: flex; align-items: center; gap: 15px;">
                                                                    <div>
                                                                        <input type="checkbox" id="tipoRango"
                                                                            value="rango" checked>
                                                                        <label for="tipoRango">Seguro por Rango</label>
                                                                    </div>
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="insuranceType"
                                                                            id="insurance_individual"
                                                                            value="individual">
                                                                        <label class="form-check-label"
                                                                            for="insurance_individual">Individual</label>
                                                                    </div>
                                                                    <div class="form-check">
                                                                        <input class="form-check-input" type="radio"
                                                                            name="insuranceType" id="insurance_familiar"
                                                                            value="familiar">
                                                                        <label class="form-check-label"
                                                                            for="insurance_familiar">Familiar</label>
                                                                    </div>

                                                                </div>

                                                                <div class="col-md-2">
                                                                    <label for="interestRate" class="form-label">Tasa
                                                                        (%)</label>
                                                                    <input type="number" class="form-control"
                                                                        id="interestRate" required
                                                                        oninput="updateRates()">
                                                                </div>
                                                                <!-- Campo para la Tasa de Interés Mínima -->
                                                                <div class="col-md-3">
                                                                    <label for="minInterestRate" class="form-label">Mín
                                                                        (%)</label>
                                                                    <input type="number" class="form-control"
                                                                        id="minInterestRate" required min="0"
                                                                        step="0.01" readonly>
                                                                    <small class="form-text text-muted">(por ejemplo,
                                                                        5.00).</small>
                                                                </div>

                                                                <!-- Campo para la Tasa de Interés Máxima -->
                                                                <div class="col-md-3">
                                                                    <label for="maxInterestRate" class="form-label">Máx
                                                                        (%)</label>
                                                                    <input type="number" class="form-control"
                                                                        id="maxInterestRate" required min="0"
                                                                        step="0.01" readonly>
                                                                    <small class="form-text text-muted">(por ejemplo,
                                                                        15.00).</small>
                                                                </div>

                                                                <!-- IVA Intereses -->
                                                                <div class="col-md-3">
                                                                    <label for="IVAInterest" class="form-label">IVA
                                                                        Interés (%)</label>
                                                                    <input type="number" class="form-control"
                                                                        id="IVAInterest" value="16.00" readonly>
                                                                </div>
                                                                <div class="row align-items-center mb-3">

                                                                    <!-- Input para el porcentaje -->
                                                                    <div class="col-md-3">
                                                                        <input type="number" class="form-control"
                                                                            id="percentage" required min="0" step="0.01"
                                                                            value="0.00">
                                                                    </div>

                                                                   <!-- Label de Comisión -->
                                                                    <div class="col-md-2">
                                                                        <label for="commission" class="form-label">Comisión:</label>
                                                                    </div>
                                                                    <!-- Input de Comisión -->
                                                                    <div class="col-md-3">
                                                                        <input type="number" class="form-control"
                                                                            id="commission" required min="0" step="0.01"
                                                                            value="0.00">
                                                                    </div>

                                                                    <!-- Radios en lista -->
                                                                    <div class="col-md-4">
                                                                        <!-- Asegúrate de que el ancho de la columna sea suficiente para los radios -->
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="commissionOption"
                                                                                id="commission_individual">
                                                                            <label class="form-check-label"
                                                                                for="commission_individual"
                                                                                style="white-space: nowrap;">
                                                                                Se descuenta
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="commissionOption"
                                                                                id="commission_cobra_aparte">
                                                                            <label class="form-check-label"
                                                                                for="commission_cobra_aparte"
                                                                                style="white-space: nowrap;">
                                                                                Se cobra aparte
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="commissionOption"
                                                                                id="commission_financea">
                                                                            <label class="form-check-label"
                                                                                for="commission_financea"
                                                                                style="white-space: nowrap;">
                                                                                Se financea
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="row align-items-center mb-3">

                                                                    <!-- Input para pesos -->
                                                                    <div class="col-md-3">
                                                                        <input type="number" class="form-control"
                                                                            id="insurance_pesos" required min="0"
                                                                            step="0.01" value="0.00">
                                                                    </div>

                                                                    <!-- Label de seguro -->
                                                                    <div class="col-md-2">
                                                                        <label for="insurance"
                                                                            class="form-label">Seguro:</label>
                                                                    </div>

                                                                    <!-- Input de seguro -->
                                                                    <div class="col-md-3">
                                                                        <input type="number" class="form-control"
                                                                            id="insurance" required min="0" step="0.01"
                                                                            value="0.00">
                                                                    </div>

                                                                    <!-- Radios en lista -->
                                                                    <div class="col-md-4">
                                                                        <!-- Asegúrate de que el ancho de la columna sea suficiente para los radios -->
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="insuranceOption"
                                                                                id="insurance_des">
                                                                            <label class="form-check-label"
                                                                                for="insurance_des"
                                                                                style="white-space: nowrap;">
                                                                                Se descuenta
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="insuranceOption"
                                                                                id="insurance_cobra_aparte">
                                                                            <label class="form-check-label"
                                                                                for="insurance_cobra_aparte"
                                                                                style="white-space: nowrap;">
                                                                                Se Amortiza
                                                                            </label>
                                                                        </div>
                                                                        <div class="form-check">
                                                                            <input class="form-check-input" type="radio"
                                                                                name="insuranceOption"
                                                                                id="insurance_financea">
                                                                            <label class="form-check-label"
                                                                                for="insurance_financea"
                                                                                style="white-space: nowrap;">
                                                                                Se financea
                                                                            </label>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-4">
                                                                    <label for="monthlyPayment" class="form-label">Pago
                                                                        Mensual Estimado</label>
                                                                    <input type="text" class="form-control"
                                                                        id="monthlyPayment" readonly>
                                                                </div>
                                                                <div class="resultados">
                                                                    <h3>Resultados del Cálculo</h3>
                                                                    <div>
                                                                        <label for="totalLoan" class="form-label">Monto
                                                                            por
                                                                            Préstamo:</label>
                                                                        <input type="text" id="totalLoan" readonly>
                                                                    </div>
                                                                    <div>
                                                                        <label for="capital"
                                                                            class="form-label">Capital:</label>
                                                                        <input type="text" id="capital" readonly>
                                                                    </div>
                                                                    <div>
                                                                        <label for="interest" class="form-label">Interés
                                                                            Ordinario:</label>
                                                                        <input type="text" id="interest" readonly>
                                                                    </div>
                                                                    <div>
                                                                        <label for="ivaInterest" class="form-label">IVA
                                                                            del Interés
                                                                            Ordinario:</label>
                                                                        <input type="text" id="ivaInterest" readonly>
                                                                    </div>
                                                                    <div>
                                                                        <label for="totalPayable"
                                                                            class="form-label">Total a Pagar:</label>
                                                                        <input type="text" id="totalPayable" readonly>
                                                                    </div>
                                                                    <div>
                                                                        <label for="cat" class="form-label">CAT:</label>
                                                                        <input type="text" id="cat" readonly>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </form>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-bs-dismiss="modal">Cerrar</button>
                                                <button type="button" class="btn btn-primary"
                                                    onclick="calculatePayment()">Calcular</button>


                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <label for="{{ credi_form.descripcion.id_for_label }}"
                                        class="form-label">Descripción</label>
                                    {{ credi_form.descripcion }}
                                </div>
                            </div>
                        </div>
                        <!-- Pestaña de Contactos -->
                        <div class="tab-pane fade" id="tab-contacto" role="tabpanel" aria-labelledby="tab-contacto-tab">
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="{{ contactos_form.apellido_paterno.id_for_label }}"
                                        class="form-label">Apellido Paterno</label>
                                    {{ contactos_form.apellido_paterno }}
                                </div>
                                <div class="col-md-3">
                                    <label for="{{ contactos_form.apellido_materno.id_for_label }}"
                                        class="form-label">Apellido Materno</label>
                                    {{ contactos_form.apellido_materno }}
                                </div>

                                <div class="col-3">
                                    <label for="{{ contactos_form.nombres.id_for_label }}"
                                        class="form-label">Nombre</label>
                                    {{ contactos_form.nombres }}
                                </div>



                                <div class="col-md-3">
                                    <label for="{{ contactos_form.puesto.id_for_label }}"
                                        class="form-label">Puesto</label>
                                    {{ contactos_form.puesto }}
                                </div>

                                <div class="col-md-3">
                                    <label for="{{ contactos_form.email.id_for_label }}"
                                        class="form-label">E-mail</label>
                                    {{ contactos_form.email }}
                                </div>

                                <!-- Campos de selección como Género y Estado Civil -->
                                <div class="col-md-2">
                                    <label for="{{ contactos_form.telefono.id_for_label }}"
                                        class="form-label">Telefono</label>
                                    {{ contactos_form.telefono }}
                                </div>
                                <div class="g-3">
                                    <button id="add-ref-4" type="button" class="btn btn-primary">Agregar</button>
                                </div>

                                <table class="table secondary mt-3" id="ref-table-4">
                                    <thead>
                                        <tr>
                                            <th>Nombre</th>
                                            <th>A. Paterno</th>
                                            <th>A. Materno</th>
                                            <th>Puesto</th>
                                            <th>Email</th>
                                            <th>Telefono</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <!-- Aquí se agregarán las filas dinámicamente -->
                                    </tbody>
                                    <input type="hidden" id="contactos-data" name="contactos-data">
                                </table>
                            </div>
                        </div>
                        <!-- Botón envío -->
                        <div class="mt-4">
                            <button class="btn btn-primary" type="submit">Enviar Solicitud</button>
                        </div>
                </form>
                {% if messages %}
                {% for message in messages %}
                <script>

                    Swal.fire({
                        title: 'Mensaje',
                        text: '{{ message }}',
                        icon: '{% if message.tags == "success" %}success{% elif message.tags == "error" %}error{% else %}info{% endif %}',
                        confirmButtonText: 'Ok'
                    });

                </script>
                {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
<!-- Carga jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Carga Popper.js y Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<!-- Funciones Script -->
<script src="{% static 'js/funciones.js' %}"></script>
<script src="{% static 'js/datos.js' %}"></script>
<script src="{% static 'js/main.js' %}"></script>
<!-- URL para obtener datos de código postal -->
<script>const obtenerDatosCpUrl = "{% url 'obtener_datos_cp' %}";</script>
{% endblock %}